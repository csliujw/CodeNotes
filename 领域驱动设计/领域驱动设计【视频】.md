# 引言

多数的软件开发过程运用的都是贫血模型，把他当作面向过程来操作的。贫血模型开发方便，对开发人员的要求低。如`JavaEE`开发，开发人员熟悉三层架构后便可进行开发。

PS：三层架构

- `Controller`
- `Service`：多数的业务代码都集中在Service中，其他两层代码少，贫血模型。
- `JavaBean`

我们倾向于把业务放在service中。对于简单的项目贫血模型是可以的，但是对于大型的软件架构这种方式是不合适的。

PS：一种解决办法是，采用领域模型，即运用设计模式。

软件开发不是一蹴而就的事情，我们不可能在不了解产品（或行业领域）的前提下进行软件开发，在开发前需要进行大量的业务知识梳理，而后到达软件设计的层面，最后才是开发。在梳理业务的过程中，我们必然会形成某个领域知识，根据领域知识来一步一步驱动软件设计。

<span style="color:red">领域驱动设计的核心就在于建立正确的领域驱动模型！</span>

# 领域驱动设计

应对软件复杂性之道。

## 假设以下问题

假设某公司出售三种产品：文字处理软件、数据库、电子表格。其中：

文字处理软件当天入账

电子表格当天入1/3， 30天后再如1/3， 剩下的90天后再入账

数据库当天入1/3， 30天后再如1/3， 60天后再入账

---

## 使用贫血模型

先来表设计

再利用三层架构，写代码。

为什么叫贫血模型？

- `JavaBean`中只有数据字段，set/get方法，无其他行为。

优点：

- 简单、开发迅速、易于理解。
- 对于那些代码书写并不复杂的算法模型，采用贫血模型是很适合的。对于大型的工程化的代码，是否使用贫血模型有待考察。

缺点：

无法良好的应对复杂逻辑。

贫血模型对于业务逻辑不复杂的项目来说是值得选择的，不能完全排斥。

## 使用领域模型

充血模型。【使用设计模式，让类与类直接协作起来，避免贫血？】

阅读面向对象项目代码的时候，经常需要从一个类跳到另一个类，因为职责被细化了。

service只处理业务，具体的操作交给领域对象去做。

听到这里，我感觉只是在复杂的业务中运用了设计模式。

领域与业务密切相关，不同领域涉及的业务差别很大。业务是学习不完的，故采用领域的方式抽象出模型。

- 【现在的感觉是，外科医生式团队。高层人员交流，设计出领域模型，普通开发人员根据领域模型进行开发，减少开发成本。】
- 【2020-11-30：按照领域驱动设计一书中所说的：领域与业务之间需要交流，人员之间的交流存在障碍，需要突破这层障碍。】

### 特点

- 对业务领域做了建模
  - 细粒度的类，易于扩展，容易复用
  - 可以应对复杂的业务逻辑
  - 需要经验才可以掌握
- 简单的领域模型
  - 几乎和数据库中的表一一对应
- 复杂的领域模型
  - 使用了继承、组合，设计模式等各种手段



