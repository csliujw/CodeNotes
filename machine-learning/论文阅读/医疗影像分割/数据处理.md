# 数据预处理

```python
def test(src):
    from torch.nn.functional import interpolate
    import torch

    img = nib.load(src)
    # 由文件本身维度确定，可能是3维，也可能是4维
    data = img.dataobj
    data = np.array(data)
    data = torch.tensor(data.astype(np.float32))

    data = data.unsqueeze(0).unsqueeze(0)
    # data.shape=([1, 1, 512, 512, 160])
    # 需要这种形状，因为dim是根据 dim = input.dim() - 2 判断的，input.dim=5 则 dim = 5-2=3
    print(data.shape)
    new_data = interpolate(torch.tensor(data), size=(512, 512, 160))
    print(new_data.shape)
    new_data = new_data.squeeze(0).squeeze(0)
    width, height, queue = new_data.shape
    OrthoSlicer3D(new_data.numpy()).show()
    num = 1
    for i in range(0, queue, 10):
        img_arr = new_data[:, :, i]
        plt.subplot(5, 4, num)
        plt.imshow(img_arr, cmap='gray')
        num += 1
    plt.show()
```

